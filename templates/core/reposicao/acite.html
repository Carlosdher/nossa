{% extends '../base.html' %}

{% block content %}
        {% if request.user.is_staff %}


        <h2>Requerimento de Reposição</h2>

        <img src="{{ object.solicitation.usuario.picture.url }}">

        <p>Professor: {{ object.solicitation.usuario.username }}</p>

        <p>Matricula: {{ object.solicitation.usuario.registration }} </p>

        <p>Turma/Periodo: {{object.solicitation.team}}</p>

        <p>Período da falta:{% if object.solicitation.date_miss_start.day <= 9 %} 0{{object.solicitation.date_miss_start.day}}{% else %}  {{object.solicitation.date_miss_start.day}}{% endif %}/{% if object.solicitation.date_miss_start.month <= 9 %}0{{object.solicitation.date_miss_start.month}}{% else %}{{object.solicitation.date_miss_start.month}}{% endif %}/{{object.solicitation.date_miss_start.year}} - {% if object.solicitation.date_miss_end.day <= 9 %} 0{{object.solicitation.date_miss_end.day}}{% else %} {{object.solicitation.date_miss_end.day}}{% endif %}/{% if object.solicitation.date_miss_end.month <= 9 %}0{{object.solicitation.date_miss_end.month}}{% else %}{{object.solicitation.date_miss_end.month}}{% endif %}/{{object.solicitation.date_miss_end.year}}</p>

        {% if object.solicitation.othes %}

          <p>Motivo: {{object.solicitation.othes}}</p>

        {% else %}
          <p>Motivo: {{object.solicitation.reason}}</p>

        {% endif %}
        <p>Justificativa: {{object.solicitation.justification}}</p>

        
        <div id='opcoes' >
        <form method="POST">
            {% csrf_token %}
            {% if object.status == 1 %}
              <input type="hidden" name="status" id="status" value="2">
              <button type="submit" class="btn btn-success">Aceitar</button>
            {% elif object.status == 2 %}
              <input type="hidden" name="status" id="status" value="3">
              <button type="submit" class="btn btn-success">Aceitar</button>
            {% endif %}
        </form>
        <button type="submit" class="btn btn-danger" id='Negar' onclick="justificativa()" >Negar</button>
      </div>
      <div style="display: none;" id="opcao_Negar"  >
        <form method="POST" >
            {% csrf_token %}
            <input type="hidden" name="status" id="status" value="0">
            <input type="text" name="justification_Aceit" id ='justification_Aceit' class="form-control"  placeholder="Justificativa de Negação">
            <input id='voltar' class="btn btn-danger" onclick="Cancelar()" value='Cancelar' type="button">
            <button type="submit" class="btn btn-primary">Enviar Justificativa</button>
          </form>
      </div>
        {% endif %}
                <!-- <form  method="POST">
            {% csrf_token %}
            <input type="hidden" name="aceita" value="aceita" />
            <input type="hidden" name="objeto" value="{{object.pk}}">
            <button type="submit" class="btn btn-primary">Aceitar</button>
          </form>
          
          <form method="POST">
            <input type="hidden" id="status" name="status" value="0">
            <input type="submit" value="Negar" />
          </form> -->

<script>
  
  negar = document.getElementById('Negar');
  aceitar = document.getElementById('opcoes');
  form = document.getElementById('opcao_Negar');
  voltar = document.getElementById('voltar')


  function justificativa() {
    // body...
    negar.style.display  = 'none';
    aceitar.style.display = 'none';
    form.style.display = 'block';
  }

  function Cancelar() {
    // body...
    negar.style.display  = 'block';
    aceitar.style.display = 'block';
    form.style.display = 'none';
  }

</script>








{% endblock %}
